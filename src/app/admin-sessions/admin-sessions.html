<div class="modal" [class.show]="isOpen">
  <div class="modal-content">
    <!-- Fixed Header -->
    <div class="modal-header">
      <h2 class="modal-title">
        <i class="fa-solid fa-calendar-days"></i>
        All Sessions
      </h2>
      <button class="close-btn" (click)="onClose()">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <!-- Scrollable Body -->
    <div class="modal-body">
      <div class="calendar-session-group">
        @for (session of sessions; track $index) {

        <!-- Session Card 1 -->
        <div class="session-card" (click)="handleClick()">
          <div class="session-header">
            <div>
              <div class="session-title-all">
                <h3 class="session-title">{{ session.title }}</h3>
                <div class="session-status status-active">
                  {{ session.isApproved ? 'Completed' : 'Pending' }}
                </div>
              </div>

              <p class="session-category">{{ session.description }}</p>
            </div>
            <!-- <span class="session-status status-approved">{{ sessionStatus(session) }}</span> -->
          </div>
          <div class="session-details">
            <div class="session-detail" style="margin-top: 0; padding-top: 0">
              <i class="fas fa-calendar"></i>
              {{ formatDateTime(session.startTime) }} - {{ formatTime(session.endTime) }}
            </div>
            <div class="session-detail">
              <i class="fa-solid fa-users"></i>
              <span>{{ session.capacity - session.remainingCapacity }} Registered</span>
            </div>
          </div>
          <div>
            @if(clicked) {
            <div class="gap"></div>
            <div class="session-detail">
              <i class="fa-solid fa-user"></i>
              <span>{{ session.trainerName }}</span>
            </div>
            <div class="gap"></div>
            <div class="session-detail">
              <i class="fa-solid fa-user"></i>
              <span href="session.sessionLink">session Link</span>
            </div>
            <div class="gap"></div>

            <button *ngIf="!session.isApproved" (click)="openConfirmModal(session.sessionId)">
              <i class="fa-solid fa-circle-plus"></i> Approve
            </button>

            <button
              *ngIf="!session.isApproved"
              class="Reject"
              (click)="openRejectModal(session.sessionId)"
            >
              Reject
            </button>

            }
          </div>
        </div>

        <!-- Confirmation Modal -->
        <!-- Confirmation Modal -->
        <div class="modal" [ngClass]="{ show: showConfirmModal }" (click)="closeOnOverlay($event)">
          <div class="modal-content confirm-modal" (click)="$event.stopPropagation()">
            <div class="modal-header">
              <h2 class="modal-title">
                <i class="fa-solid fa-circle-question"></i>
                Approve Session
              </h2>
            </div>

            <div class="modal-body" style="text-align: center; padding: 1.5rem">
              <p style="font-size: 1rem; color: #1a202c; margin-bottom: 1.5rem">
                Do you want to Approve this session?
              </p>
              <div style="display: flex; gap: 1rem; justify-content: center">
                <button class="yes-btn" (click)="confirmRegistration()">Yes</button>
                <button class="no-btn" (click)="closeConfirmModal()">No</button>
              </div>
            </div>
          </div>
        </div>

        <div class="modal" [ngClass]="{ show: showRejectModal }" (click)="closeOnOverlay($event)">
          <div class="modal-content confirm-modal" (click)="$event.stopPropagation()">
            <div class="modal-header">
              <h2 class="modal-title">
                <i class="fa-solid fa-circle-question"></i>
                Reject Session
              </h2>
            </div>

            <div class="modal-body" style="text-align: center; padding: 1.5rem">
              <p style="font-size: 1rem; color: #1a202c; margin-bottom: 1.5rem">
                Do you want to Reject this session?
              </p>
              <input type="text" placeholder="Reason for rejection" [(ngModel)]="rejectionReason" />

              <div style="display: flex; gap: 1rem; justify-content: center">
                <button class="yes-btn" (click)="RejectRegistration(selectedSessionId)">Yes</button>

                <button class="no-btn" (click)="closeConfirmModal()">No</button>
              </div>
            </div>
          </div>
        </div>

        }
      </div>
    </div>
  </div>
</div>
